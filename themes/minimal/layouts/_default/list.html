{{ define "main" }}
  {{ if .IsHome }}
    <section class="hero">
      <p class="eyebrow">{{ site.Params.heroEyebrow | default "Notes" }}</p>
      <h1>{{ site.Params.heroTitle | default site.Title }}</h1>
      <p class="lead">
        {{ site.Params.heroLead
          | default "Stories about building practical AI infrastructure, from datasets to deployment." }}
      </p>
      {{ with site.Params.heroCta }}
        <a class="button" href="{{ .url }}">{{ .label }}</a>
      {{ end }}
    </section>
  {{ else }}
    <header class="page-header">
      <h1>{{ .Title }}</h1>
      {{ with .Params.description }}<p class="lead">{{ . }}</p>{{ end }}
    </header>
  {{ end }}

  {{ $pages := .Pages }}
  {{ if .IsHome }}
    {{ $pages = where site.RegularPages "Type" "posts" }}
  {{ end }}

  {{ if gt (len $pages) 0 }}
    <section class="post-grid">
      {{ range $pages.ByDate.Reverse }}
        <article class="post-card">
          <p class="post-meta">
            {{ .Date.Format "Jan 2, 2006" }} â€¢ {{ .ReadingTime }} min read
          </p>
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          {{ with .Params.excerpt }}
            <p>{{ . }}</p>
          {{ else }}
            <p>{{ .Summary }}</p>
          {{ end }}
          {{ with .Params.tags }}
            <p class="tag-list">
              {{ range . }}<span class="tag">{{ . }}</span>{{ end }}
            </p>
          {{ end }}
        </article>
      {{ end }}
    </section>
  {{ else }}
    <p>No content yet. Check back soon.</p>
  {{ end }}
{{ end }}
