<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Designing Trustworthy Data Pipelines for AI Infra | Building AI Infra</title>
    
      <meta name="description" content="Field notes on building reliable AI infrastructure—from datasets to deployment." />
    
    <link rel="stylesheet" href="/building-ai-infra/css/theme.css" />
    
  </head>
  <body class="page">
    <header class="site-header">
      <div class="brand">
        <a href="/" class="site-title">Building AI Infra</a>
        
          <p class="tagline">Practical stories for builders shipping AI products.</p>
        
      </div>
      <nav class="site-nav">
        
        
          <a
            class="nav-link"
            href="/building-ai-infra/"
            >Home</a
          >
        
          <a
            class="nav-link"
            href="/building-ai-infra/posts/"
            >Posts</a
          >
        
          <a
            class="nav-link"
            href="/building-ai-infra/about/"
            >About</a
          >
        
      </nav>
      
        <button class="theme-toggle" data-color-mode="dark">Toggle theme</button>
      
    </header>
    <main class="content">
      
  <article class="post">
    <p class="post-meta">
      Feb 11, 2024
       • 2 min read
    </p>
    <h1>Designing Trustworthy Data Pipelines for AI Infra</h1>
    <p class="lead">How I set up opinionated data layers, observability, and ownership so model teams can trust every batch.</p>
    <div class="post-body">
      <p>The most painful outages I&rsquo;ve handled during the past year were silent regressions introduced in data pipelines. Models happily retrained on corrupted data, dashboards stayed green, and we only noticed something was wrong after customer tickets piled up. Since then, I&rsquo;ve adopted a three-layer strategy that keeps pipelines honest without requiring a new platform team.</p>
<h2 id="1-declare-the-contract-up-front">1. Declare the contract up front</h2>
<p>Every dataset that feeds a model gets a machine-readable schema, ownership tag, and data-sensitivity label stored alongside the code that produces it. The contract lives in Git, can be imported into tests, and powers automated alerts whenever a breaking change shows up in CI.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">contract</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">owner</span>: <span style="color:#ae81ff">applied-ml</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dataset</span>: <span style="color:#ae81ff">rewards_v2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">schema</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prompt</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#ae81ff">string</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">completion</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#ae81ff">string</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">max_length</span>: <span style="color:#ae81ff">4096</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">reward</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">type</span>: <span style="color:#ae81ff">float</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">min</span>: -<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">max</span>: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>By treating contracts as normal code, we get peer review, version history, and reproducibility for free.</p>
<h2 id="2-run-cheap-validation-everywhere">2. Run cheap validation everywhere</h2>
<p>Validation rulesets run in three places:</p>
<ol>
<li><strong>CI</strong> — Unit tests assert that transformations comply with the contract before merging to main.</li>
<li><strong>Batch jobs</strong> — Lightweight profilers execute for each output shard and push metrics (row counts, uniques, distribution shifts) to the observability stack.</li>
<li><strong>Streaming checks</strong> — Canary consumers read the next batch before promotion and diff it against the last good version using the same rules.</li>
</ol>
<p>Most regressions are caught inside CI, the rest are blocked by the canary.</p>
<h2 id="3-instrument-pipelines-like-user-facing-services">3. Instrument pipelines like user-facing services</h2>
<p>Pipelines deserve the same SLO rigor we apply to production services. For each critical dataset we define:</p>
<ul>
<li><strong>Freshness SLO</strong> – e.g., <em>90% of batches arrive within 15 minutes of schedule.</em></li>
<li><strong>Correctness SLO</strong> – <em>99% of runs emit &lt;0.5% invalid rows.</em></li>
<li><strong>Coverage SLO</strong> – <em>Model-serving logs must observe ≥98% of new product flows within 24 hours.</em></li>
</ul>
<p>We emit metrics per SLO, feed them into alerting, and keep status dashboards next to feature dashboards. When a pipeline breaks an SLO, the owning team writes a mini postmortem just like any other incident.</p>
<hr>
<p>None of these ideas are novel, but the discipline to apply them consistently is still rare. When founders ask how to de-risk their ML roadmap, this is the first playbook I hand over. Get the data foundation right and everything upstream—training, evaluation, deployment—becomes dramatically less chaotic.*** End Patch</p>

    </div>
    
      <div class="tag-list">
        <span class="tag">data</span><span class="tag">observability</span><span class="tag">best-practices</span>
      </div>
    
  </article>

    </main>
    <footer class="site-footer">
      <small>&copy; 2025 Building AI Infra. Built with Hugo.</small>
      
        <div class="social-links">
          
            <a href="https://github.com/ruoyuhuang" target="_blank" rel="noopener">GitHub</a>
          
            <a href="https://www.linkedin.com/in/ruoyuhuang/" target="_blank" rel="noopener">LinkedIn</a>
          
        </div>
      
    </footer>
    
      <script>
        const body = document.body;
        const toggle = document.querySelector(".theme-toggle");
        const stored = window.localStorage.getItem("color-mode");
        if (stored) body.dataset.theme = stored;
        toggle?.addEventListener("click", () => {
          const next = body.dataset.theme === "dark" ? "light" : "dark";
          body.dataset.theme = next;
          window.localStorage.setItem("color-mode", next);
        });
      </script>
    
  </body>
</html>
